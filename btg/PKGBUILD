pkgname='btg'
pkgver='0.9.8'
pkgrel=1
pkgdesc='Linux bittorrent client implemented in C++ and using the rasterbar libtorrent library.'
url='http://btg.berlios.de/'
arch=('i686' 'x86_64')
license=('GPL')
depends=('rb_libtorrent' 'gnutls' 'dialog')
options=('!libtool' '!emptydirs')
source=("http://download.berlios.de/${pkgname}/${pkgname}-${pkgver}.tar.gz")
md5sums=('82af4ee05e76d6d6bec95740dbb79358')

build() {
  cd "${startdir}/src/${pkgname}-${pkgver}" || return 1

  sed -i 's|"-L$RBLIBTORRENT_ROOT/lib -ltorrent"|"-L$RBLIBTORRENT_ROOT/lib -ltorrent-rasterbar"|g' m4/btg_rblibtorrent_check.m4 || return 1

  sh autogen.sh || return 1

  ./configure --prefix=/usr \
    --enable-session-saving \
    --enable-btg-config \
    --enable-cli \
    --enable-www \
    --enable-event-callback \
    --with-boost-date-time=mt \
    --with-boost-filesystem=mt \
    --with-boost-thread=mt \
    --with-boost-regex=mt \
    --with-boost-program-options=mt \
    --with-rblibtorrent=/usr \
    || return 1

  make || return 1
  make DESTDIR=$startdir/pkg install || return 1
}
